// 지점에 표시할 아이콘 URL을 정의합니다.
const icons = {
    start: 'https://example.com/start_icon.png', // 출발 아이콘 URL
    middle: 'https://example.com/middle_icon.png', // 중간 아이콘 URL
    end: 'https://example.com/end_icon.png' // 도착 아이콘 URL
};

// 선택된 좌표에 따라 마커를 추가하는 함수입니다.
function addCustomMarker(position, type) {
    var imageSrc = icons[type], // 마커 이미지 URL
        imageSize = new kakao.maps.Size(36, 37), // 마커 이미지의 크기
        markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize),
        marker = new kakao.maps.Marker({
            position: position,
            image: markerImage
        });

    marker.setMap(map);
    return marker;
}

// 지도에 클릭 이벤트를 등록하여 마커를 표시하는 함수입니다
kakao.maps.event.addListener(map, 'rightclick', function(mouseEvent) {
    var latlng = mouseEvent.latLng;
    var projection = map.getProjection();
    var point = projection.pointFromCoords(latlng);

    selectionBox.style.display = 'block';
    selectionBox.style.left = point.x + 'px';
    selectionBox.style.top = point.y + 'px';

    // 클릭 위치를 데이터 속성으로 저장합니다
    selectionBox.dataset.lat = latlng.getLat();
    selectionBox.dataset.lng = latlng.getLng();
});

// 옵션을 선택했을 때 호출되는 함수
function handleOption(option) {
    var lat = selectionBox.dataset.lat;
    var lng = selectionBox.dataset.lng;
    var position = new kakao.maps.LatLng(lat, lng);

    if (option === '시작 지점') {
        addCustomMarker(position, 'start');
    } else if (option === '중간 지점') {
        addCustomMarker(position, 'middle');
    } else if (option === '도착 지점') {
        addCustomMarker(position, 'end');
    }

    alert(option + '을 선택했습니다. 위도: ' + lat + ', 경도: ' + lng);
    closeSelectionBox();
}

// 선택 상자를 닫는 함수
function closeSelectionBox() {
    selectionBox.style.display = 'none';
}
