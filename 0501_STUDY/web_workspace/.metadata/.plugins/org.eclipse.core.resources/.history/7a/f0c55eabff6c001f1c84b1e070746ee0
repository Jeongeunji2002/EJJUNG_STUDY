<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>지도와 장소 검색</title>
<style>
/* 기존 CSS ... */

#optionPanel {
    display: none; /* 기본적으로 숨김 */
    position: absolute;
    background: white;
    border: 1px solid #ccc;
    border-radius: 5px;
    padding: 10px;
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
    z-index: 2;
}
#optionPanel button {
    margin: 5px;
}
</style>
</head>
<body>
    <!-- 기존 HTML ... -->

    <!-- 선택지 패널 추가 -->
    <div id="optionPanel">
        <p>좌표를 저장하려면 아래 버튼을 클릭하세요:</p>
        <button onclick="saveCoordinates('Option1')">출발 지점</button>
        <button onclick="saveCoordinates('Option2')">중간 지점</button>
        <button onclick="closeOptionPanel()">취소</button>
    </div>

    <!-- 기존 JavaScript ... -->
    <script type="text/javascript">
        // 전역 변수
        var optionPanel = document.getElementById('optionPanel');
        var savedCoordinates = {}; // 좌표 저장용 객체

        // 지도 클릭 시 호출되는 이벤트
        kakao.maps.event.addListener(map, 'rightclick', function(mouseEvent) {
            var latlng = mouseEvent.latLng;

            // 선택지 패널의 위치를 클릭한 위치로 설정
            optionPanel.style.left = (mouseEvent.pixel.x + 10) + 'px';
            optionPanel.style.top = (mouseEvent.pixel.y + 10) + 'px';
            optionPanel.style.display = 'block'; // 패널 보이기

            // 좌표 정보를 전역 변수에 저장
            savedCoordinates = {
                lat: latlng.getLat(),
                lng: latlng.getLng()
            };

            // 클릭한 위치에 마커를 업데이트
            marker.setPosition(latlng);
        });

        // 선택지 패널 닫기
        function closeOptionPanel() {
            optionPanel.style.display = 'none'; // 패널 숨기기
        }

        // 좌표를 저장하는 함수
        function saveCoordinates(option) {
            // 예시로 콘솔에 저장된 좌표 출력
            console.log('저장된 좌표 (' + option + '):', savedCoordinates);
            alert('좌표가 ' + option + '에 저장되었습니다.');
            
            // 저장 완료 후 패널 닫기
            closeOptionPanel();
        }
    </script>
</body>
</html>
